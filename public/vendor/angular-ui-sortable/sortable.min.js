!function(a,b,c){"use strict";b.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(a,d,e){return{require:"?ngModel",link:function(f,g,h,i){function j(a,b){return b&&"function"==typeof b?function(c,d){a(c,d),b(c,d)}:a}function k(a,b){var c=a.sortable("option","helper");return"clone"===c||"function"==typeof c&&b.item.sortable.isCustomHelperUsed()}function l(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}function m(a,b){b.item.sortable._destroy()}var n,o={},p={"ui-floating":c},q={receive:null,remove:null,start:null,stop:null,update:null},r={helper:null};return b.extend(o,p,a,f.$eval(h.uiSortable)),b.element.fn&&b.element.fn.jquery?(i?(f.$watch(h.ngModel+".length",function(){d(function(){g.data("ui-sortable")&&g.sortable("refresh")})}),q.start=function(a,d){if("auto"===o["ui-floating"]){var e=d.item.siblings();b.element(a.target).data("ui-sortable").floating=l(e)}d.item.sortable={model:i.$modelValue[d.item.index()],index:d.item.index(),source:d.item.parent(),sourceModel:i.$modelValue,cancel:function(){d.item.sortable._isCanceled=!0},isCanceled:function(){return d.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!d.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:d.item.sortable._isCustomHelperUsed,_destroy:function(){b.forEach(d.item.sortable,function(a,b){d.item.sortable[b]=c})}}},q.activate=function(){n=g.contents();var a=g.sortable("option","placeholder");if(a&&a.element&&"function"==typeof a.element){var c=a.element();c=b.element(c);var d=g.find('[class="'+c.attr("class")+'"]');n=n.not(d)}},q.update=function(a,b){if(!b.item.sortable.received){b.item.sortable.dropindex=b.item.index();var c=b.item.parent();b.item.sortable.droptarget=c,b.item.sortable.droptargetModel=c.scope().$eval(c.attr("ng-model")),g.sortable("cancel")}k(g,b)&&!b.item.sortable.received&&"parent"===g.sortable("option","appendTo")&&(n=n.not(n.last())),n.appendTo(g),b.item.sortable.received&&(n=null),b.item.sortable.received&&!b.item.sortable.isCanceled()&&f.$apply(function(){i.$modelValue.splice(b.item.sortable.dropindex,0,b.item.sortable.moved)})},q.stop=function(a,b){!b.item.sortable.received&&"dropindex"in b.item.sortable&&!b.item.sortable.isCanceled()?f.$apply(function(){i.$modelValue.splice(b.item.sortable.dropindex,0,i.$modelValue.splice(b.item.sortable.index,1)[0])}):"dropindex"in b.item.sortable&&!b.item.sortable.isCanceled()||k(g,b)||n.appendTo(g),n=null},q.receive=function(a,b){b.item.sortable.received=!0},q.remove=function(a,b){"dropindex"in b.item.sortable||(g.sortable("cancel"),b.item.sortable.cancel()),b.item.sortable.isCanceled()||f.$apply(function(){b.item.sortable.moved=i.$modelValue.splice(b.item.sortable.index,1)[0]})},r.helper=function(a){return a&&"function"==typeof a?function(b,c){var d=a(b,c);return c.sortable._isCustomHelperUsed=c!==d,d}:a},f.$watch(h.uiSortable,function(a){g.data("ui-sortable")&&b.forEach(a,function(a,b){return b in p?("ui-floating"!==b||a!==!1&&a!==!0||(g.data("ui-sortable").floating=a),void(o[b]=a)):(q[b]?("stop"===b&&(a=j(a,function(){f.$apply()}),a=j(a,m)),a=j(q[b],a)):r[b]&&(a=r[b](a)),o[b]=a,void g.sortable("option",b,a))})},!0),b.forEach(q,function(a,b){o[b]=j(a,o[b]),"stop"===b&&(o[b]=j(o[b],m))})):e.info("ui.sortable: ngModel not provided!",g),void g.sortable(o)):void e.error("ui.sortable: jQuery should be included before AngularJS!")}}}])}(window,window.angular);